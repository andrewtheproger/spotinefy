<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link type="text/css" rel="stylesheet" href="/static/css/style.css" />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://unpkg.com/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>
  </head>
  <body>
    <div id="app">
      <header>
        <b-navbar toggleable="lg" type="dark" variant="danger">
          <div class="brand">
            <b-navbar-brand href="#">Spotiнеfy</b-navbar-brand>
          </div>
          <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>
          <b-collapse id="nav-collapse" is-nav>
            <b-navbar-nav>
              <b-nav-item href="/music">Моя музыка</b-nav-item>
              <b-nav-item href="/charts">Чарты</b-nav-item>
              <b-nav-item href="/artists">Артисты</b-nav-item>
              <b-nav-item href="/add-music">Добавить музыку</b-nav-item>
              <b-nav-item href="/add-artist">Добавить артиста</b-nav-item>
            </b-navbar-nav>

            <!-- Right aligned nav items -->
            <b-navbar-nav class="ml-auto" text-align="right">
              <div class="right-aligned-header">
                <div class="right-aligned-header-item">
                  <b-nav-form>
                    <div class="form-search">
                      <div class="form-search-item">
                        <b-form-input
                          size="sm"
                          class="mr-sm-2"
                          placeholder="Введите название"
                        ></b-form-input>
                      </div>
                      <div class="form-search-item">
                        <b-button
                          size="sm"
                          class="my-2 my-sm-0"
                          type="submit"
                          variant="light"
                          >Искать</b-button
                        >
                      </div>
                    </div>
                  </b-nav-form>
                </div>
                <div class="right-aligned-header-item">
                  <b-nav-item-dropdown right>
                    <template #button-content>
                      <em>ЗДЕСЬ ИМЯ ПОЛЬЗОВАТЕЛЯ</em>
                    </template>
                    <b-dropdown-item href="#">Профиль</b-dropdown-item>
                    <b-dropdown-item href="#">Выйти</b-dropdown-item>
                  </b-nav-item-dropdown>
                </div>
              </div>
            </b-navbar-nav>
          </b-collapse>
        </b-navbar>
      </header>
      <main role="main" class="container">
        {% block content %}{% endblock %}
      </main>
    </div>
    <script lang="Javascript">
      var app = new Vue({
        el: '#app',
        data: {
          message: 'Hello Vue!',
          form_song: {
            authors: '',
            name: '',
            clip: '',
            year: "",
            file: null
          },
          form_artist: {
            name: "",
            file: null
          }
        },
        methods: {
          onSubmit_song(event) {
            event.preventDefault()
            let formData = new FormData();
            formData.append("file", this.form_song.file);
            formData.append("year", this.form_song.year);
            formData.append("clip", this.form_song.clip);
            formData.append("name", this.form_song.name);
            formData.append("authors", this.form_song.authors);
            axios({
              url: "/add-music",
              method: "POST",
              headers: {
              },
              data: formData,
            })
            .then(function (response) {
              console.log(response);
            })
            .catch(function (error) {
              console.log(error);
            });
          },
          onSubmit_artist(event){
            {}
          },
          onReset(event) {
            event.preventDefault()
            this.form_song.clip = ''
            this.form_song.name = ''
            this.form_song.year = ""
            this.form_song.authors = ""
            this.form_song.file = null
            this.form_artist.file = null
            this.form_artist.name = ''
            this.show = false
            this.$nextTick(() => {
              this.show = true
            })
          }
        }
      })
    </script>
  </body>
</html>
